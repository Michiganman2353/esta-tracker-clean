import admin from 'firebase-admin';

let serviceAccount;
try {
  serviceAccount = (await import('../serviceAccountKey.json', { 
    assert: { type: 'json' } 
  })).default;
} catch (error) {
  console.error('Failed to load service account:', error);
  process.exit(1);
}

if (!admin.apps.length) {
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount)
  });
}

export default admin;